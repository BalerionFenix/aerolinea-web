<div class="flex-1 p-6 lg:p-8 overflow-y-auto bg-white-50">
  <div class="max-w-7xl mx-auto">

    <!-- PageHeading -->
    <div class="flex flex-wrap items-center justify-between gap-3 mb-6">
      <h1 class="text-gray-900 text-3xl font-black tracking-tight">
        Consulta de Vuelos
      </h1>
    </div>

    <!-- Filter Section -->
    <div class="bg-white p-4 rounded-xl border border-gray-200 shadow-sm mb-6">
      <details class="group" [open]="filtrosAbiertos">
        <summary
          class="flex cursor-pointer items-center justify-between list-none"
          (click)="toggleFiltros(); $event.preventDefault()"
        >
          <p class="text-gray-900 text-base font-semibold">Filtros</p>

          <!-- Heroicon chevron-down -->
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="2"
            stroke="currentColor"
            class="w-5 h-5 text-gray-600 transition-transform duration-200"
            [class.rotate-180]="filtrosAbiertos"
          >
            <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
          </svg>
        </summary>

        <div class="mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
          <!-- Número de Vuelo -->
          <label class="flex flex-col">
            <span class="text-sm font-medium text-gray-800 pb-2">Número de Vuelo</span>
            <input
              type="text"
              [(ngModel)]="filtros.numeroVuelo"
              placeholder="Ej: AG123"
              class="h-12 px-3.5 border border-gray-300 rounded-lg text-sm
                     bg-white text-gray-900 placeholder-gray-400
                     focus:ring-2 focus:ring-blue-500 focus:outline-none"
            />
          </label>

          <!-- Base -->
          <label class="flex flex-col">
            <span class="text-sm font-medium text-gray-800 pb-2">Base</span>
            <select
              [(ngModel)]="filtros.base"
              class="h-12 px-3.5 border border-gray-300 rounded-lg text-sm
                     bg-white text-gray-900
                     focus:ring-2 focus:ring-blue-500 focus:outline-none"
            >
              <option value="">Todas</option>
              <option *ngFor="let base of bases" [value]="base.ciudad">
                {{ base.nombre }} ({{ base.ciudad }})
              </option>
            </select>
          </label>

          <!-- Origen -->
          <label class="flex flex-col">
            <span class="text-sm font-medium text-gray-800 pb-2">Origen</span>
            <input
              type="text"
              [(ngModel)]="filtros.origen"
              placeholder="Ciudad o código IATA"
              class="h-12 px-3.5 border border-gray-300 rounded-lg text-sm
                     bg-white text-gray-900 placeholder-gray-400
                     focus:ring-2 focus:ring-blue-500 focus:outline-none"
            />
          </label>

          <!-- Destino -->
          <label class="flex flex-col">
            <span class="text-sm font-medium text-gray-800 pb-2">Destino</span>
            <input
              type="text"
              [(ngModel)]="filtros.destino"
              placeholder="Ciudad o código IATA"
              class="h-12 px-3.5 border border-gray-300 rounded-lg text-sm
                     bg-white text-gray-900 placeholder-gray-400
                     focus:ring-2 focus:ring-blue-500 focus:outline-none"
            />
          </label>
        </div>

        <div
          class="flex justify-end gap-3 mt-4 pt-4 border-t border-gray-200"
        >
          <button
            (click)="limpiarFiltros()"
            class="h-10 px-4 rounded-lg text-sm font-medium
                   bg-gray-200 text-gray-800
                   hover:bg-gray-300 transition"
          >
            Limpiar Filtros
          </button>

          <button
            (click)="aplicarFiltros()"
            class="h-10 px-4 rounded-lg text-sm font-medium text-white
                   bg-blue-600 hover:bg-blue-700 transition"
          >
            Aplicar Filtros
          </button>
        </div>
      </details>
    </div>

    <!-- Flights Table -->
    <div
      class="bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden"
    >
      <div class="overflow-x-auto">
        <table class="w-full text-sm text-left text-gray-700">
          <thead class="uppercase bg-gray-100 text-xs text-gray-700">
          <tr>
            <th class="px-6 py-3">
              <div class="flex items-center gap-1 cursor-pointer" (click)="ordenarPor('vuelo_num')">
                Número de Vuelo
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                     stroke-width="2" stroke="currentColor" class="w-4 h-4">
                  <path stroke-linecap="round" stroke-linejoin="round"
                        d="M8 9l4-4 4 4M16 15l-4 4-4-4"/>
                </svg>
              </div>
            </th>
            <th class="px-6 py-3">Origen</th>
            <th class="px-6 py-3">Destino</th>
            <th class="px-6 py-3">
              <div class="flex items-center gap-1 cursor-pointer" (click)="ordenarPor('fecha')">
                Fecha
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                     stroke-width="2" stroke="currentColor" class="w-4 h-4">
                  <path stroke-linecap="round" stroke-linejoin="round"
                        d="M8 9l4-4 4 4M16 15l-4 4-4-4"/>
                </svg>
              </div>
            </th>
            <th class="px-6 py-3">
              <div class="flex items-center gap-1 cursor-pointer" (click)="ordenarPor('hora')">
                Hora
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                     stroke-width="2" stroke="currentColor" class="w-4 h-4">
                  <path stroke-linecap="round" stroke-linejoin="round"
                        d="M8 9l4-4 4 4M16 15l-4 4-4-4"/>
                </svg>
              </div>
            </th>
            <th class="px-6 py-3">Estado</th>
            <th class="px-6 py-3">Avión (matrícula)</th>
          </tr>
          </thead>

          <tbody>
          <tr
            *ngFor="let vuelo of vuelosPaginados"
            class="bg-white border-b hover:bg-gray-50"
          >
            <td class="px-6 py-4 font-medium text-gray-900">
              {{ vuelo.vuelo_num }}
            </td>
            <td class="px-6 py-4">{{ vuelo.origen }}</td>
            <td class="px-6 py-4">{{ vuelo.destino }}</td>
            <td class="px-6 py-4">{{ vuelo.fecha | date:'yyyy-MM-dd' }}</td>
            <td class="px-6 py-4">{{ vuelo.hora }}</td>
            <td class="px-6 py-4">
              <span
                class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"
                [ngClass]="getEstadoClase(vuelo.estado)"
              >
                {{ getEstadoTexto(vuelo.estado) }}
              </span>
            </td>
            <td class="px-6 py-4">{{ vuelo.avion_codigo }}</td>
          </tr>

          <tr *ngIf="vuelosPaginados.length === 0">
            <td colspan="7" class="px-6 py-8 text-center text-gray-500">
              No se encontraron vuelos que coincidan con los filtros aplicados.
            </td>
          </tr>
          </tbody>
        </table>
      </div>

      <!-- Pagination -->
      <nav class="flex items-center justify-between p-4">
        <span class="text-sm text-gray-700">
          Mostrando
          <span class="font-semibold">{{ (paginaActual - 1) * itemsPorPagina + 1 }}-{{ Math.min(paginaActual * itemsPorPagina, totalItems) }}</span>
          de
          <span class="font-semibold">{{ totalItems }}</span>
        </span>

        <div class="flex gap-2">
          <button
            (click)="paginaAnterior()"
            [disabled]="paginaActual === 1"
            class="px-3 h-8 rounded-lg border border-gray-300
                   bg-white text-gray-700
                   hover:bg-gray-100 disabled:opacity-50"
          >
            Anterior
          </button>

          <button
            (click)="paginaSiguiente()"
            [disabled]="paginaActual === totalPaginas || totalPaginas === 0"
            class="px-3 h-8 rounded-lg border border-gray-300
                   bg-white text-gray-700
                   hover:bg-gray-100 disabled:opacity-50"
          >
            Siguiente
          </button>
        </div>
      </nav>
    </div>
  </div>
</div>

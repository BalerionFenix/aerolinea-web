<!-- users-edit.component.html -->
<main class="px-6 sm:px-8 lg:px-12 py-10 flex flex-1 justify-center bg-white-50">
  <div class="flex flex-col w-full max-w-5xl gap-8"> <!-- Título + retroceso -->
    <div class="flex flex-col gap-1"><p class="text-gray-900 text-3xl font-black leading-tight">Editar Usuario</p>
      <p class="text-gray-500 text-base font-normal leading-normal"> Actualiza la información del usuario y sus
        permisos. </p></div> <!-- Formulario -->
    <div class="bg-white p-6 sm:p-8 rounded-2xl border border-gray-200 shadow-md">
      <form (ngSubmit)="submitForm()" [formGroup]="userForm" class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4">
        <!-- Nombre -->
        <div class="md:col-span-2"><label class="block text-sm font-medium text-gray-700 mb-1" for="nombre">Nombre
          Completo</label> <input class="form-input block w-full rounded-lg border border-gray-300 bg-white text-gray-900 text-sm focus:border-blue-600 focus:ring-blue-200 py-2 px-3" formControlName="nombre" id="nombre" placeholder="Ej: Juan Pérez"
                                  type="text"/>
          <p *ngIf="userForm.get('nombre')?.touched && userForm.get('nombre')?.invalid"
             class="text-xs text-red-600 mt-1"> El nombre es obligatorio. </p></div> <!-- Email -->
        <div class="md:col-span-2"><label class="block text-sm font-medium text-gray-700 mb-1" for="email">Correo
          Electrónico</label> <input class="form-input block w-full rounded-lg border border-gray-300 bg-white text-gray-900 text-sm focus:border-blue-600 focus:ring-blue-200 py-2 px-3" formControlName="email" id="email" placeholder="ejemplo@correo.com"
                                     type="email"/>
          <p *ngIf="userForm.get('email')?.touched && userForm.get('email')?.invalid" class="text-xs text-red-600 mt-1">
            El email es obligatorio y debe ser válido. </p></div> <!-- Rol -->
        <div><label class="block text-sm font-medium text-gray-700 mb-1" for="rol_id">Rol</label> <select
          class="form-select block w-full rounded-lg border border-gray-300 bg-white text-gray-900 text-sm focus:border-blue-600 focus:ring-blue-200 py-2 px-3" formControlName="rol_id"
          id="rol_id">
          <option value="">Seleccione un rol</option>
          <option *ngFor="let r of roles" [selected]="r.rol_id === userForm.get('rol_id')?.value"
                  [value]="r.rol_id"> {{ r.nombre }}
          </option>
        </select>
          <p *ngIf="userForm.get('rol_id')?.touched && userForm.get('rol_id')?.invalid"
             class="text-xs text-red-600 mt-1"> El rol es obligatorio. </p></div> <!-- Base -->
        <div><label class="block text-sm font-medium text-gray-700 mb-1" for="base_codigo">Base</label> <select
          class="form-select block w-full rounded-lg border border-gray-300 bg-white text-gray-900 text-sm focus:border-blue-600 focus:ring-blue-200 py-2 px-3" formControlName="base_codigo"
          id="base_codigo">
          <option value="">Seleccionar base</option>
          <option *ngFor="let base of bases" [selected]="base.base_codigo === userForm.get('base_codigo')?.value"
                  [value]="base.base_codigo"> {{ base.nombre }}
          </option>
        </select>
          <p *ngIf="userForm.get('base_codigo')?.touched && userForm.get('base_codigo')?.invalid"
             class="text-xs text-red-600 mt-1"> La base es obligatoria. </p></div> <!-- Persona Código -->
        <div><label class="block text-sm font-medium text-gray-700 mb-1" for="persona_codigo">Persona Código</label>
          <input class="form-input block w-full rounded-lg border border-gray-300 bg-gray-100 text-gray-500 cursor-not-allowed py-2 px-3" formControlName="persona_codigo" id="persona_codigo"
                 readonly/>
        </div> <!-- Activo con interruptor -->
        <div class="md:col-span-2 mt-2"><label class="block text-sm font-medium text-gray-700 mb-2">Activo</label>
          <label class="inline-flex relative items-center cursor-pointer"> <input class="sr-only peer"
                                                                                  formControlName="activo"
                                                                                  type="checkbox"/>
            <div
              class="w-11 h-6 bg-gray-200 rounded-full peer peer-checked:bg-blue-600 after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:after:translate-x-full peer-checked:after:border-white"></div>
          </label></div> <!-- Botones -->
        <div class="md:col-span-2 flex justify-end gap-3 pt-4 border-t border-gray-200 mt-3">
          <button (click)="cancel()" class="flex items-center justify-center h-10 px-4 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-sm font-bold"
                  type="button">
            Cancelar
          </button>
          <button class="flex items-center justify-center h-10 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 gap-2 text-sm font-bold"
                  type="submit">
            <!-- Heroicon Save -->
            <svg class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path d="M5 13l4 4L19 7" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Guardar Cambios
          </button>
        </div>
      </form>
    </div>
  </div>
</main>

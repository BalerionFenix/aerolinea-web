<header class="flex sticky top-0 z-10 items-center justify-between whitespace-nowrap border-b border-gray-200 bg-white/80 backdrop-blur-sm px-6 py-4">
  <!-- Título -->
  <div class="flex items-center gap-8">
    <h2 class="text-gray-900 text-xl font-bold leading-tight tracking-[-0.015em]">
      {{ titulo }}
    </h2>
  </div>

  <!-- Información del usuario -->
  <div class="flex flex-1 justify-end items-center gap-4">

    <!-- Skeleton loader mientras carga -->
    <div *ngIf="cargando" class="flex items-center gap-3">
      <div class="hidden sm:flex flex-col items-end gap-1">
        <div class="h-4 w-32 bg-gray-200 rounded animate-pulse"></div>
        <div class="h-3 w-24 bg-gray-200 rounded animate-pulse"></div>
      </div>
      <div class="size-10 bg-gray-200 rounded-full animate-pulse"></div>
    </div>

    <!-- Información del usuario cargada -->
    <div *ngIf="!cargando" class="flex items-center gap-3">

      <!-- Nombre y rol (oculto en móvil) -->
      <div class="hidden sm:flex flex-col items-end">
        <p class="text-gray-900 text-sm font-semibold leading-tight">
          {{ nombreUsuario }}
        </p>
        <p class="text-gray-500 text-xs font-normal leading-tight">
          {{ rolUsuario }}
        </p>
      </div>

      <!-- Imagen de perfil clickeable -->
      <button
        (click)="irAlPerfil()"
        class="relative group cursor-pointer focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 rounded-full"
        title="Ver perfil">

        <!-- Foto de Google o Avatar con iniciales -->
        <div *ngIf="fotoUrl; else avatarPlaceholder"
             class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10 transition-transform group-hover:scale-105 group-hover:ring-2 group-hover:ring-primary group-hover:ring-offset-2"
             [style.background-image]="'url(' + fotoUrl + ')'">
        </div>

        <ng-template #avatarPlaceholder>
          <div class="size-10 rounded-full bg-primary flex items-center justify-center text-white text-sm font-bold transition-transform group-hover:scale-105 group-hover:ring-2 group-hover:ring-primary group-hover:ring-offset-2">
            {{ iniciales }}
          </div>
        </ng-template>

        <!-- Indicador de hover -->
        <div class="absolute inset-0 rounded-full bg-black opacity-0 group-hover:opacity-10 transition-opacity"></div>
      </button>
    </div>
  </div>
</header>
